---
- name: Create service user
  user:
    name: "{{ service_user }}"
    state: present

- name: Copy systemd service file to server
  copy:
    src: spring-boot-app.service
    dest: /etc/systemd/system/spring-boot-app.service
    owner: root
    group: root

- name: Start and enable the service
  systemd:
    name: "{{ service_name }}"
    state: started
    enabled: yes
  notify:
    - Restart my service